ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

= JEP-1: Jenkins Enhancement Proposal Format

:toc:

.Metadata
[cols="2"]
|===
| JEP
| 1

| Title
| Jenkins Enhancement Proposal Format

| Sponsor
| link:https://github.com/rtyler[R Tyler Croy]

| Status
| :speech_balloon: Draft

| Type
| Process

| Created
| 2017-09-12

| Discussion-To
| link:https://groups.google.com/d/msg/jenkinsci-dev/spDAr8EJm3c/T9Nmhn-fAQAJ[jenkinsci-dev@]

|===


[[abstract]]
== Abstract

A Jenkins Enhancement Proposal (JEP) is a design document that
describes a new feature or aspect of Jenkins itself,
or the Jenkins project processes or environment.
This JEP describes the structure of JEP documents
and details the process by which JEPs are
created, submitted, reviewed, finalized, and maintained.

[[specification]]
== Specification

=== What is a JEP?

JEP stands for Jenkins Enhancement Proposal.
A JEP is a design document that
describes a new feature or aspect of Jenkins itself, or Jenkins project processes or environment.
A JEP provides a concise technical specification of the feature,
describes the motivation for the change,
and discusses the rationale behind the design.

JEPs are the primary mechanisms for proposing major new
features, for collecting community input on an issue, and for
documenting the design decisions that have gone into Jenkins.
Each JEP must have at least one <<Sponsor>>.
The JEP Sponsor is responsible for the JEP overall - building
consensus for that JEP within the community, documenting dissenting opinions,
coordinating contributors work, and generally ensuring the JEP
meets the style, format, and quality guidelines described below.
A JEP may also have any number of <<Contributor, Contributors>> who
help write, implement, discussion, or offer feedback about the JEP.
One contributor might do only one or any combination of these
of these things during any part of the life of a JEP.

Because the JEPs are maintained as text files in a versioned
repository, their revision history is the historical record of the
feature proposal footnoteref:[repo, https://github.com/jenkinsci/jep].

[NOTE]
====
For non-text files added to the repository, such as images, the files must be
readable with free and open source tools, and should ideally be editable by
other contributors. For example, use SVG rather than PSD for vector graphics.
====


=== JEP Types

There are three kinds of JEP:

. A **Standards Track** JEP describes a new feature or implementation
 for Jenkins. It may also describe an interoperability or
 backwards-compatibility standard which will be supported for the feature in
 current versions of Jenkins, moving forward.
. An **Informational** JEP describes a Jenkins design issue, or
 provides general guidelines or information to the Jenkins community,
 but does not propose a new feature. Informational JEPs do not
 necessarily represent a Jenkins community consensus or
 recommendation, so users and implementers are free to ignore
 Informational JEPs or follow their advice.
. A **Process** JEP describes a process surrounding Jenkins, or
 proposes a change to (or an event in) a process. Process JEPs are like
 Standards Track JEPs but apply to areas other than the Jenkins codebase
 itself. They may propose an implementation, but not for what would be
 generally considered the Jenkins codebase; they often require community
 consensus; unlike Informational JEPs, they are more than recommendations, and
 users are typically not free to ignore them. Examples include procedures,
 guidelines, changes to the decision-making process, and changes to the tools
 or environment used in Jenkins development. Any meta-JEP (JEP focusing on the
 improvement of the Jenkins Enhancement Proposal process) is also considered a
 Process JEP.

=== JEP Terminology

==== BDFL

There are several references in this JEP to the "BDFL". This acronym stands for
"Benevolent Dictator for Life", and refers to
link:https://github.com/kohsuke[Kohsuke Kawaguchi],
original creator of Jenkins.

==== Editor

The JEP editors are individuals responsible for managing the administrative
and editorial aspects of the JEP workflow (e.g. assigning JEP numbers and
changing their status). See <<editor-responsibilities, JEP Editor Responsibilities & Workflow>> for
details. The current editors are:

* link:https://github.com/rtyler[R. Tyler Croy]
* link:https://github.com/oleg-nenashev[Oleg Nenashev]
* link:https://github.com/bitwiseman[Liam Newman]
* link:https://github.com/omehegan[Owen Mehegan]
* link:https://github.com/orrc[Christopher Orr]

JEP editorship is by invitation of the current editors. All of the JEP workflow
can be conducted via the GitHub JEP Repository footnoteref:[repo] and pull
requests.

==== Contributor

A JEP may have any number of "Contributors" who
help write, implement, discuss, or offer feedback about that JEP.
One contributor might do only one or any combination of these
of these things during any part of the life of a JEP.

==== Sponsor

Each JEP has at least one "Sponsor".

The JEP Sponsor is a contributor who is responsible for the JEP throughout its lifecycle.
Their responsibilities include:

* Building consensus for that JEP within the community
* Documenting dissenting opinions
* Coordinating contributors' work
* Ensuring the JEP meets the style, format, and quality guidelines
* Maintaining the JEP after it is finalized
* Setting and communicating the schedule as needed

The Sponsor of a JEP may or may not do any of the tasks other contributors do.
For example, one sponsor might write large portions of one JEP,
while another sponsor might leave the writing to other contributors.

Anyone may be Sponsor for a JEP,
though it should be someone familiar enough with Jenkins, the Jenkins project,
and the JEP workflow to effectively guide the JEP to completion.

A JEP may have more than one Sponsor, especially after it has been finalized
and is being maintained over time.
For simplicity, this document uses the singular
("The JEP Sponsor", "a sponsor")
when referring the one or more people in the role of "Sponsor" of a JEP.

[[requirement-levels]]
==== Must/Should/May

JEP documents _must_ follow link:https://tools.ietf.org/html/rfc2119[RFC 2119]
which defines key words to "indicate requirement levels". These are listed
below:

. **MUST** This word, or the terms "REQUIRED" or "SHALL", mean that the
   definition is an absolute requirement of the specification.
. **MUST NOT** This phrase, or the phrase "SHALL NOT", mean that the
   definition is an absolute prohibition of the specification.
. **SHOULD** This word, or the adjective "RECOMMENDED", mean that there
   may exist valid reasons in particular circumstances to ignore a
   particular item, but the full implications must be understood and
   carefully weighed before choosing a different course.
. **SHOULD NOT** This phrase, or the phrase "NOT RECOMMENDED" mean that
   there may exist valid reasons in particular circumstances when the
   particular behavior is acceptable or even useful, but the full
   implications should be understood and the case carefully weighed
   before implementing any behavior described with this label.
. **MAY** This word, or the adjective "OPTIONAL", mean that an item is
   truly optional.

NOTE: When choosing to go counter to SHOULD or SHOULD NOT guidance,
the reasons behind that choice SHOULD be documented.

=== JEP Workflow

==== Overview

Before delving into the details of the JEP workflow,
let's take a high-level look at how JEP might go.

. **<<start, Inital Discussion>>** - Andrea has an idea for new feature emails jenkinsci-dev@googlegroups.com.
  She discusses the idea with the group, determining that the idea is worth pursuing.
  She chooses to be the "<<Sponsor>>" for this potential JEP.
  She <<discussion, gathers initial feedback>> from the community, adjusts her design as needed,
  records the reasons for design choices, and keeps track of differing views.

. **<<submission, Submission>>** - Andrea writes up the proposal using the JEP document template as a guide,
  including a supporting documentation and a reference implementation if needed.
  She then submits the JEP to the JEP editors for
  <<approval, approval as a Draft JEP>>.
  An editor checks the submission and determines it is ready to considered as a JEP.
  They "approve" the submission, assigning the JEP a number, and the submission becomes a "Draft" JEP.

. **<<draft, Draft Status>>** - While the JEP is a "<<draft, Draft>>", Andrea may continue to gather
  feedback, change the proposal, and record the reasoning and differing views.
  When she believes the design is complete and represents the consensus of the community,
  she submits the JEP for review by the <<BDFL>>.

. **<<review, Review>>** - The <<BDFL>> reviews the JEP and decides whether to accept it,
  making it an "<<accepted, Accepted>>" JEP.
  Other possible resolutions are "<<rejected, Rejected>>",
  "<<deferred, Deferred>>", "<<withdrawn, Withdrawn>>".

. **<<accepted, Accepted Status>>** -  Andrea and other contributors
  complete all remaining implementation related to the
  "<<accepted, Accepted>>" JEP (code, documentation, or other changes).

. **<<final, Final Status>>** - When the implementation is complete and all changes have been published
  or otherwise incorporated into the appropriate code repositories,
  the JEP status is changed to "<<final, Final>>".  The JEP is done.

. **<<maintenance, Maintenance>>** - At some later date, the JEP may need to be updated.
  As "Sponsor" of the JEP, Andrea makes changes as needed or hands off sponsorship to someone else.
  Updates follow the same basic JEP workflow.

IMPORTANT: The above is only a high-level overview of the JEP workflow.
The full and complete description of the JEP workflow is provided below.
Read the full description below before starting a JEP.

[[start]]
==== Start with an idea for Jenkins

The JEP process begins with a new idea for Jenkins.
A single JEP should contain a single key proposal or new idea.
The more focused the JEP, the more successful it tends to be.
The JEP editors reserve the right to reject potential JEPs
if they appear too unfocused or too broad.
If in doubt, sponsors should split their JEP into several well-focused ones.

[NOTE]
====
Enhancements or patches which have a smaller impact often don't need a
JEP can be handle via the Jenkins development workflow with a JIRA item and/or
pull request to the appropriate repository.
====

==== Find a Sponsor

Each JEP must have a "<<Sponsor>>" -- someone who writes the JEP using the style and
format described below, shepherds the discussions in the appropriate forums,
and attempts to build community consensus around the idea. The JEP Sponsor should first attempt to ascertain whether the idea is JEP-able.
Posting to the jenkinsci-dev@googlegroups.com mailing list is the best way to
go about this.

[[discussion]]
==== Discuss the idea with the community

Vetting an idea publicly before going as far as writing a JEP is meant
to save the potential sponsor time. Many ideas have been brought
forward for changing Jenkins that have been rejected for various
reasons. Asking the Jenkins community first if an idea is original
helps prevent too much time being spent on something that is
guaranteed to be rejected based on prior discussions (searching
the internet does not always do the trick). It also helps to make sure
the idea is applicable to the entire community and not just the sponsor. Just
because an idea sounds good to the sponsor does not mean it will work for most
people in most areas where Jenkins is used.

Once the sponsor has asked the Jenkins community as to whether an idea has any
chance of acceptance, a draft JEP should be presented to jenkinsci-dev@. This
gives the sponsor a chance to flesh out the draft JEP to make sure it is
properly formatted, of high quality, and to address initial concerns about the
proposal.

[[submission]]
==== Creating a JEP Submission

Following a discussion on jenkinsci-dev@,
the proposal should be turned into as a JEP submission and submitted
via a GitHub pull request to this repository footnoteref:[repo].
The submission must be written in JEP style as described below,
otherwise, it will fail review immediately
(although minor errors may be corrected by the editors).

To submit a JEP for approval as Draft, the JEP sponsor should:

. Fork the JEP repository footnoteref:[repo].
. Create a new branch called `jep-submission` their fork
  (`git checkout -b jep-submission`).
. Copy the folder `jep-template/0000` to `jep/0000`.
. Modify the template JEP in `jep/0000`
  per the instructions in this JEP (which are also outlined in the template).
. Commit and push the changes to their fork
  and submit a pull request targeting the `jenkinsci/master` branch.

A JEP editor will check the submission for conformance with
JEP structure and formatting guidelines.
Editors may make minor changes to make the submission meets
the requirements for approval as a Draft JEP.
If a JEP requires major changes, editors will add specific feedback
and send the submission back to the sponsor for revision.

IMPORTANT: All submissions must go through pull request,
even those by editors or contributors with "git push" privileges
for the JEP repository footnoteref:[repo].

The JEP editors will not unreasonably deny a JEP.
Reasons for denying JEP "Draft" status include:

* duplication of effort
* being technically unsound
* not providing enough information in the
  "Motivation" or "Backwards Compatibility" sections
* not in keeping with the link:https://jenkins.io/project/governance/[Jenkins philosophy].

The BDFL may be consulted during the approval phase,
and is the final arbiter of a submission's approvability as a Draft JEP.

[[approval]]
==== Approval as Draft JEP

Once JEP meets requirements for structure and formatting,
the editors will approve the submission as a draft JEP
by following the steps outlined in the
<<approve-as-draft, editors' "Approve as Draft" section>>.
When they are done, the Draft JEP will have an official JEP number and
the sumbmission PR will have been merged to a matching folder and feature branch
(i.e the
`link:https://github.com/jenkinsci/jep/tree/jep-1/jep/1[jep/1]` folder in the
`https://github.com/jenkinsci/jep/tree/jep-1/[jep-1]` branch).

IMPORTANT: "Approval as Draft" is *not* the same as accepting the JEP.

Editors are not the only ones who can approve as submission.
Non-editor contributors who have "git push" privileges for the
JEP repository footnoteref:[repo] may also approve submissions.
When doing so, the developer must handle the tasks
that would normally be taken care of by the JEP editors
(see <<editor-responsibilities, JEP Editor Responsibilities & Workflow>>).
This includes ensuring the initial version meets the expected standards
for a Draft JEP.

[[draft]]
==== Refining a Draft JEP

The version of a JEP that is approved as a Draft JEP
is rarely the same as the final version that is reviewed and hopefully accepted.
A Draft JEP often requires further refinement and expansion
before it is suffiently complete and represents the consensus of the community.

Standards Track JEPs consist of two parts, a design document
and a reference implementation.
At minimum, prototype implementation should be co-developed with the JEP,
as ideas that sound good in principle sometimes turn out to be impractical
when subjected to the test of implementation.

A JEP's sponsor is responsible for collecting community feedback on a JEP
before submitting it for review.
Potential changes to a draft JEP may be discussed further on jenkinsci-dev@.
However, long open-ended discussions are not recommended on mailing lists.
Strategies to keep the discussion efficient include:

* setting up a series of in-person, or video-conferencing sessions to
  discuss the JEP with necessary stakeholders.
* having the JEP sponsor accept private comments in the early design phases
* setting up a wiki page, etc.
* committing and reviewing small concrete changes via Pull Requests
  rather than large sweeping changes

JEP sponsors should use their discretion here.

////
We found that the Github UI bogs down around 150-200 comments.
I'd like people feedback on a potential solution.

I'm completely solid on the details yet,
but the idea is to RECOMMMEND that users propose changes via PRs
from their own forks rather than by commenting on the base PR.

1. Fork the `jenkinsci/jep` repository
2. Make proposed changes in a branch on that fork
3. Submit a PR to the JEP feature branch.
4. If a PR from the feature branch to master is open, reference that PR in the personal PR.
      Examnple : "Typo fixes to #12".

For feedback, questions, or less solid ideas, add them as asciidoc comments below/near the lines you'd like to discuss.
Then people can respond in that PR.
////

The JEP sponsor may also ask JEP editors for further feedback regarding the
style and consistency of a JEP and its readiness for review by the BDFL.

As updates are necessary, the JEP sponsor and other contributors
should push commits to their fork of the JEP repository footnoteref:[repo],
and submit pull requests targeting the JEP's feature branch.

[[review]]
==== JEP Review

Once the sponsor believes a JEP is complete,
they request the BDFL review the JEP for acceptance, usually via
an email to the jenkinsci-dev@ mailing list.
For a JEP that is predetermined to be acceptable
(e.g., it is an obvious win as-is and/or its implementation has already been checked in)
the BDFL may also initiate a JEP review, first notifying the JEP sponsor and
giving them a chance to make revisions beforehand.
The BDFL and their chosen consultants then review the JEP.
They will resolve the JEP as "Accepted" or "Rejected",
or keep it as "Draft" sending it back to the JEP sponsor for revision.

The final authority for JEP resolution is the BDFL. However, whenever a new
JEP is put forward, any core developer that believes they are suitably
experienced to make the final decision on that JEP may offer to serve as
the BDFL's delegate (or "JEP czar") for that JEP. If their self-nomination
is accepted by the other core contributors and the BDFL, then they will have
the authority to accept (or reject) that JEP. This process happens most
frequently with JEPs where the BDFL has agreed in principle that
*something* needs to be done, but there are details that need to be worked out
before the JEP can be accepted.

If the final decision on a JEP is to be made by a delegate rather than
directly by the BDFL, this will be recorded by including the
"BDFL-Delegate" header in the JEP.

JEP review and resolution may also occur on a list other than jenkinsci-dev@ In
this case, the "Discussions-To" heading in the JEP will identify the
appropriate alternative list where discussion, review and pronouncement on the
JEP will occur.

[[accepted]]
==== Accepting a JEP

For a JEP to be "Accepted" it must meet certain minimum criteria:

* It must be a clear and complete description of the proposed enhancement.
* The enhancement must represent a net improvement.
* The proposed implementation, if applicable, must be solid, must not
  complicate Jenkins unduly, and must be the same license as the component the
  proposal is meant to added to (or MIT licensed by default).

Once a JEP has been accepted, the implementation must be completed.
The Jenkins project values contribution over "talk"
footnote:[https://jenkins.io/project/governance/#meritocracy], and as such the
implementation is of utmost importance to moving any proposal (Standards or
Process) forward.

[[final]]
==== Finalizing a JEP
When the implementation is complete and incorporated into the
appropriate "main" code repository, the JEP sponsor will change
the JEP's status changed to "Final".

[[maintenance]]
==== JEP Maintenance

Even after a JEP reaches "Final" status, it may need to be updated.

In general, Standards track JEPs are not modified after they have
reached the Final state. Once a Standards JEP has been completed, Jenkins developer
documentation must become the formal documentation of the expected behavior.

Informational and Process JEPs may be updated over time to reflect changes
to development practices and other details. The precise process followed in
these cases will depend on the nature and purpose of the JEP being updated.

Replaced::  [[replaced]]
Final JEPs may eventually also be "Replaced" - superseded by a different JEP -
rendering the original obsolete.
This is intended for Informational JEPs, where version 2 of an API can replace version 1.

==== Other JEP Outcomes

Not all JEPs will be accepted and finalized.

Rejected::  [[rejected]]
A JEP can also be "Rejected" by the reviewer. Perhaps after all is said and done it
was not a good idea. It is still important to have a record of this fact.
Even an Accepted draft may ultimately be Rejected
at some point before it reaches "Final" status,
due to factors not known at the time it was Accepted.
If the reviewer believes the JEP might be Accepted after some modification,
the reviewer should not reject the JEP, instead returning it Draft status
with feedback for the sponsor.
Upon the request of the sponsor, the BDFL may choose to return a
Rejected JEP to Draft status, but this is at the discrection of the BDFL.

Withdrawn::  [[withdrawn]]
The "Withdrawn" status is similar to "Rejected" - it means that the JEP sponsor
themselves has decided that the JEP is actually a bad idea,
or agrees that a competing proposal is a better alternative.

Deferred:: [[deferred]]
A JEP can also be assigned a status of "Deferred". The JEP sponsor or an
editor can assign the JEP this status when no progress is being made
on the JEP. Once a JEP is deferred, a JEP editor can re-assign it
to draft status.

Active:: [[active]]
Some Informational and Process JEPs may also have a status of "Active" if they
are ongoing and never meant to be completed per se. E.g. JEP 1 (this JEP).

==== Updating JEP Status and Resolution

Whenever a JEP status changes, the "Status" field in the JEP document must be updated.

The possible paths of a JEP's status are as follows:

.JEP Workflow
image::workflow.png[JEP Workflow]

When a JEP is Accepted, Rejected or Withdrawn,
a "<<header-resolution, Resolution>>" section must be added to the JEP Header
with a link to the relevant post in the jenkinsci-dev@ mailing list archives.

==== Scheduling and timeframes

This workflow does not dictate specific time frames for any actions.
In general, it is expected that a JEP should make reasonable progress over time,
and all involved should respond in everyone can agree is timely manner.
If it becomes necessary to set specific timeframes for action,
it is the sponsors responsibility to do so.
Just as the sponsor must build consensus for a JEP,
they must also set and communicate a reasonable schedule to keep a JEP moving forward.
If one or more contributors are not responding
and the sponsor chooses to move forard without their feedback,
they should document that choice in the "<<Reasoning>>" section of the JEP.

=== JEP Guidelines

==== Required Sections

All JEPs MUST have the following parts to be "approved as Draft":

. **Metadata** - table containing the <<metadata, JEP Header Preamble>> about the JEP,
  including the JEP number, a short descriptive title, the names,
  and optionally the contact info for each sponsor, etc.
. **Abstract** - short (200 word) description of the technical issue
  being addressed.
. **Specification** - The technical specification should describe the
  syntax and semantics of any new feature. The specification should be
  sufficiently detailed to allow new or existing Jenkins developers to
  reasonably understand the scope/impact of an implementation.
. **Motivation** - A clear description of the motivation is critical for any JEP
  that wants to change Jenkins or the Jenkins project.
  The motivation section should clearly explain why the existing
  code base or process is inadequate to address the problem that the JEP solves.
  A JEP submission without sufficient discussion of its motivation
  will not be approved as a JEP Draft.
. **Reasoning** - The reasoning describes why particular design decisions were made.
  It should describe alternate designs that were considered and related work,
  e.g. how the feature is supported in other systems.
+
The reasoning should provide evidence of consensus within the
community and discuss important objections or concerns raised
during discussion.

. **Backwards Compatibility** -
  All JEPs must include a section describing any incompatibilities and their severity.
  The JEP must explain how the sponsor proposes to deal with these incompatibilities.
  If there are no dackwards compatibility concerns, the section must say that.
  JEP submissions that do not adequately discuss backwards compatibility,
  when such discussion is required will not be approved as JEP Drafts.
. **Reference Implementation** --
  If a JEP will include code changes, an open source reference implementation
  must be completed before any JEP is given status "Final".
  The reference implementation need not be completed before the JEP is accepted.
  While there is merit to the approach of reaching consensus on the
  specification and reasoning before writing code,
  the principle of "rough consensus and running code" is still useful
  when it comes to resolving many discussions of API details.
. **References** -- When moving a JEP from a Draft to "Accepted" or "Final" state,
  the references section should be updated to include links to the pull requests
  and mailing list discussions which were involved in the process. The JEP
  should self-document the process in which it was developed.

The final implementation must include test code and documentation
appropriate for either the Jenkins user or developer documentation.

==== JEP File Format and Style

JEPs are UTF-8 encoded text files using the
link:https://asciidoctor.org[AsciiDoc] format.
AsciiDoc allows for rich markup that is still quite easy to read,
but also results in good-looking and functional HTML.

The following are style guidelines for JEP asciidoc files.
Items earlier in the list are higher importance than later items.

===== Keep `link` on one line (REQUIRED)

Asciidoc is newline insensitive by default.
This means that structures such as links can wrap across lines, like this:

[source, asciidoc]
--
link:http://asciidoctor.org/docs/asciidoc-recommended-practices/#one-sentence-per-line[One
sentence per line]
--

This does not improve readability or diffing.
Keep each link all on the same line.

[source, asciidoc]
--
link:http://asciidoctor.org/docs/asciidoc-recommended-practices/#one-sentence-per-line[One sentence per line]
--

===== 120 characters per line (REQUIRED)

Aside from the structures mentioned above this point,
lines MUST be wrapped before 120 characters per line.
This is required to make diffs and comments reasonably accurate and specific.

===== 80 characters per line (RECOMMENDED)

Similar to the above, lines should be wrapped before 80 characters per line.
However, this is approximiate - some lines may go beyond 80 characters
where it seems appropriate.
This tends to make diffs (including side-by-side views) more readable.

===== One sentence per line (RECOMMENDED)

There are a number of reasons to use
link:http://asciidoctor.org/docs/asciidoc-recommended-practices/#one-sentence-per-line[one sentence per line].

===== One phrase per line (RECOMMENDED)

Taking one sentence per line a step further,
splinting sentences to one line per phrase makes even more sense.
The stucture of sentences can be seen in the raw text
and text to be even more easily rearraged.

===== Links start new lines (RECOMMENDED)

When reading the raw text diffs multiple links in one sentence
or even one paragraph can result in an unreadable mess.

[source, asciidoc]
--
As part of this year's link:https://www.cloudbees.com/jenkinsworld/home[Jenkins
World] we're hosting another link:http://www.meetup.com/jenkinsmeetup/events/232811529/[Contributor
Summit], to discuss: link:/projects/blueocean[*Blue Ocean*], link:/doc/pipeline[*Pipeline*]
and *Storage Pluggability*.
--

Putting each link on a new line makes reading the raw text significantly easier,
while also tending to make the raw text adhere more closely to line length limits.

[source, asciidoc]
--
As part of this year's
link:https://www.cloudbees.com/jenkinsworld/home[Jenkins World]
we're hosting another
link:http://www.meetup.com/jenkinsmeetup/events/232811529/[Contributor Summit],
to discuss:
link:/projects/blueocean[*Blue Ocean*],
link:/doc/pipeline[*Pipeline*]
and *Storage Pluggability*.
--


[[metadata]]
==== JEP Header Preamble

===== Required Metadata

All JEPs MUST begin with an AsciiDoc table containing metadata relevant to the
JEP:

[source,asciidoc]
----
.Metadata
[cols="2"]
|===
| JEP
| 1

| Title
| Jenkins Enhancement Proposal Format

| Sponsor
| link:https://github.com/rtyler[R Tyler Croy]

| Status
| :speech_balloon: Draft

| Type
| Process

| Created
| 2017-09-12
|===
----


. **JEP** -- Proposal number, given by the JEP editors. Use "0000" until one is assigned.
. **Title** -- Brief title explaining the proposal in fewer than 50 characters
. **Sponsor** -- Sponsor of the JEP, in essence, the individual
  responsible for seeing the JEP through the process.
. **Status** -- Draft :speech_balloon:, Deferred :hourglass:, Accepted :ok_hand:,
  Rejected :no_entry:, Withdrawn :hand:, Final :lock:, Replaced :dagger:, Active :smile:.
. **Type** -- Describes the type of JEP: Standards, Informational, Process
. **Created** -- Date (`%Y-%m-%d`) when the document was first created.

=====  Addition Header Rows

BDFL-Delegate:: [[header-bdfl-delegate]]
A **BDFL-Delegate** row is used to record cases where the final decision to
approve or reject a JEP rests with someone other than the BDFL.

Discussions-To:: [[header-discussions-to]]
For a JEP where final pronouncement will be made on a list other than
jenkinsci-dev@, a **Discussions-To** row will indicate the mailing list
or URL where the pronouncement will occur. A temporary Discussions-To header
may also be used when a draft JEP is being discussed prior to submission for
pronouncement.

Requires:: [[header-requires]]
JEPs may have a **Requires** row, indicating the JEP numbers that this
JEP depends on.

Superseded-By:: [[header-superseded-by]]
JEPs may also have a **Superseded-By** row indicating that a JEP has been
rendered obsolete by a later document; the value is the number of the JEP that
replaces the current document. The newer JEP must have a **Replaces** row
containing the number of the JEP that it rendered obsolete.

Resolution:: [[header-resolution]]
A  **Resolution** section will be added to JEPs when their status is set to
Accepted, Rejected or Withdrawn.
It will include a link to the relevant post in the jenkinsci-dev@ mailing list archives.


==== Auxiliary Files

JEPs may include auxiliary files such as diagrams. Such files must be
named appropriately, with lowercase letters and no spaces, and be included in
the directory with the `README.adoc` describing the JEP.

=== Reporting JEP Bugs, or Submitting JEP Updates

The process for reporting a bug or submitting a JEP update depends on several factors,
such as the maturity of the JEP, the preferences of the JEP sponsor, and the nature
of the comments. For the early draft stages of the JEP, it's probably best to
send  comments and changes directly to the JEP sponsor. For more mature, or
finished JEPs consider submitting corrections to the JEP repository
footnoteref:[repo] or the Jenkins issue tracker
footnoteref:[issues,https://issues.jenkins-ci.org].  If the JEP sponsor is a
Jenkins developer, assign the bug/patch to them, otherwise assign it to a JEP
editor.

When in doubt about where to send changes, please check first
with the JEP sponsor and/or a JEP editor.


Even JEP sponsors with git push privileges for the JEP repository should submit
via Pull Request, with the exception of status or resolution updates
which may be pushed directly given the change was already discussed
and agreed to elsewhere.

[[transferring]]
=== Transferring JEP Sponsorship

It occasionally becomes necessary to transfer sponsorship of JEPs to a
new sponsor. In general, it is preferable to retain the original sponsor as
a co-sponsor of the transferred JEP, but that's really up to the
original sponsor. A good reason to transfer sponsorship is because the
original sponsor no longer has the time or interest in updating it or
following through with the JEP process, or has fallen off the face of
the 'net (i.e. is unreachable or not responding to email). A bad
reason to transfer sponsorship is because the sponsor doesn't agree with the
direction of the JEP. One aim of the JEP process is to try to build
consensus around a JEP, but if that's not possible, a sponsor can always
submit a competing JEP.

Ownership of a JEP may also be assumed via pull request.
Fork the JEP repository, footnoteref:[repo] make the sponsorship
modification, and submit a pull request. At the same time, send a message asking
to take over, addressed to both the original sponsor and the JEP editors via
jenkinsci-dev@.  If the original sponsor doesn't respond to email in a timely
manner, the JEP editors will make a unilateral decision (it's not like such
decisions can't be reversed :).

[[editor-responsibilities]]
=== JEP Editor Responsibilities & Workflow

A JEP editor must subscribe to the jenkinsci-dev@googlegroups.com list and must
watch the JEP repository footnoteref:[repo]. Most correspondence regarding JEP
administration can be handled through GitHub issues and pull requests.

Aside from the editorial cases outlined below, editors should submit all changes
as GitHub pull requests (the same as any other contributor).

IMPORTANT: JEP editors don't pass judgment on JEPs. They merely do the
administrative & editorial part (which is generally a low volume task).

==== Conformance check

For each new JEP submission, an editor will:

* Read the JEP to check if it is ready, sound, and complete. The ideas
 must make technical sense, even if they don't seem likely to be
 accepted.

* The title should accurately describe the content.

* Edit the JEP for minor non-controversial language
(spelling, grammar, sentence structure, etc.), markup, code style changes.
For significant or time consuming changes,
the editor may choose to provide feedback instead.

==== Request Changes

If the JEP isn't ready, an editor will send it back to the sponsor for
revision with specific instructions.

==== Approve as Draft

Once the JEP is ready for the repository, a JEP editor will:

. Assign a JEP number (almost always just the next available number, but
  may also be a special/joke number, like 666 or 3141).
. Create a new feature branch in jenkinsci/jep for the JEP, i.e. `jep-1`.
. Re-target the original sponsor's pull request to the feature branch
  (see https://help.github.com/articles/changing-the-base-branch-of-a-pull-request/)
. Squash the commit(s) into that JEP's feature branch.
. Update the folder number to match the JEP number
. Update the JEP number in the document.


== Motivation

Jenkins has classically been driven by "you-had-to-be-there" development. With
specific changes largely being driven by smaller independent groups of
developers (sometimes just one).

Design documents extending back into the history of Jenkins are few and far
between, as the project grew organically over time. As such, a contributor,
existing or future, must read mountains of code, pull requests, mailing list
discussions, etc, in order to fully understand how/what/why for many major
subsystems within Jenkins.

Additionally, Jenkins has no formal approach to discussing and reviewing larger
changes as evidenced by many of the Jenkins 2.0 mailing list threads
footnote:[https://groups.google.com/d/msg/jenkinsci-dev/vbXK7JJekFw/BlEvO0UxBgAJ],
which ballooned into threads with 100+ replies and sufficient chaos to be very
difficult for those who weren't full-time Jenkins developers to understand.


The Jenkins Enhancement Proposal aims to address both of these major issues by
providing an understood process for making sizable, but understandable,
enhancements to Jenkins.

=== Benefits to existing developers

JEP provides a systematic approach for vetting and developing new proposals and
ideas for Jenkins. By encouraging "everybody to follow the rules" it will be
easier for existing developers to get their ideas and changes into Jenkins
without finding themselves mired in unspoken cultural norms within the project.

=== Benefits to future developers

By providing clear, understandable, and bite-sized design documents which would
explain various subsections of Jenkins. JEPs also make it clearer how an
ambitious new developer to the Jenkins project can propose, and make progress
upon, a new idea they have for Jenkins.

Overall, less chaos and more productivity is the rationale for JEP.

== Reasoning

The Python community, whose process JEP is modeled after, have successfully
navigated several large-scale reworkings of Python and its related tools and
processes over the past decade. This includes most notably the multi-year
project of Python 3 (formerly Python 3000).

Their Python Enhancement Proposals are largely consensus driven, which is
_mostly_ how work is done presently in the Jenkins project,
footnote:[https://groups.google.com/d/msgid/jenkinsci-dev/824CAC89-7A49-478A-9904-5C77D8FF5A80%40beckweb.net]
footnote:[https://groups.google.com/d/msgid/jenkinsci-dev/CAPbPdObKcXxZ2rgGdx6Z2HVKwH9mE_gkVbB1GOeCEhmZ7JkfwQ%40mail.gmail.com]
footnote:[https://groups.google.com/d/msgid/jenkinsci-dev/CA%2BnPnMz-m49TK7Em%2BxBNb%2BV98dBCz9CrrPXg3uW6%2B_x3KX5gOQ%40mail.gmail.com]
 making the PEP model relatively straightforward to graft onto our existing
 processes for making proposals and deciding upon changes.

=== Differences from Python PEP

The process by which a number of link:https://apache.org[Apache] projects are
operated was also considered, but the Python Enhancement Proposal process was
by far the most well-documented and obviously successful approach considered to
project improvement (technical and otherwise) over time.

The Python process uses "Rationale" as the heading for the section for describing design decisions.
However the meaning of "Rationale" is similar to "Motivation" in some contexts.
We decided to use "Reasoning" instead to avoid confusion.

=== Requirements-level terms

Some non-native english speakers commented on the
<<requirement-levels, Must/Should/May>> mentioned that "should" is a synonym of "must",
but that existing RFC was a good justification for keeping the terms.

=== Limits of BDFL model

People expressed concern over the limits of the current model where the BDFL
has final say in a number of steps.
They felt having 1-person bottlenecks in the JEP process could be problematic.
The BDFL delegating to other addresses some of that,
but it is still worth noting possible alternatives.

One alternative would be for the Jenkins project Governance meeting to have final say.
Another alternative would be to create some sort of "Technical Steering Committee",
separate from Governance, to do this job.

Issues mentioned in relation to these alternatives:

* **Voting policy** - a voting policy would need to be established,
outlining what percentage of the meeting would need to vote for or against a JEP.
* **Committee vs Delegation** - a strictly committee-approval approach
may not result in good decisions being made in a timely manner. For example,
only a few people are qualified to make decisions on Remoting.
It would be difficult for a group of people in `#jenkins-meeting` to vote
sensibly on a JEP relating to Remoting which most of them don't fully understand.
Delegation to experts and stakeholders is much more likely to produce high quality improvements.
* **Lack of established process** - structured technical decision making
in the Jenkins project (as outlined in this JEP) is still in its early stages.

The BDFL model with Delegation as needed may not be sufficient in the long run,
but it will suffice for now.

=== Timeliness

Along with concerns about a bottleneck in BDFL reviews,
some wanted to add specific language to set expectations timeliness
(also sometimes referred to a
"link:https://en.wikipedia.org/wiki/Service-level_agreement[service-level agreements]", or SLAs).
The "<<Deferred>>" status addresses what happens if
a sponsor does not move a JEP forward in a timely manner,
but there are no contingencies for slow response from
contributors, editors, the BDFL, or BDFL delegates.

There are any number of ways to set expectations about timeliness.
For example, regarding the review process, one person mentioned put forward,
link:https://github.com/jenkinsci/jep/pull/1#discussion-diff-139636422R362[this possible outline].

For now, we have chosen to add a "<<Scheduling and timeframes>>" section
and not to set specific timeframes for action or response.
Attempting to set exact limits on a volunteer organization could lead to more
difficulties than leaving the timing up to the contributors to each JEP.


=== Requiring same license

Some contributors were concerned that changes to a componenent
"must be the same license as the component the proposal is
meant to added to (or MIT licensed by default)."
The mentioned that  some companies strictly require "Apache v.2",
because MIT is not explicit about the patent release.
By setting this condition we explicitly require contributors
to create a reference implementation with the MIT license,
which their employeer may not allow.

We could allow other licenses, or mixed licenses.
However, most JEPs will refer to core or many of the "essential" plugins.
All of those are MIT licensed, such that anybody contributing
to those repositories is already expected to contribute
under the existing (MIT) license.

We chose to keep this text as-is until we have a concrete reason to change it.

=== Asciidoc linter

There are currently no Asciidoc linters.
Should one be found, we will evaluate it for automated enforcement of
<<JEP File Format and Style>>.

== References

=== Related Processes

* link:https://www.python.org/dev/peps/[Python Enhancement Proposals]
* link:https://github.com/jenkins-infra/iep[Infrastructure Enhancement Proposal]
* link:http://www.ietf.org/rfc.html[IETF RFC]
